import { Injectable } from '@angular/core';
import * as i0 from "@angular/core";
export class DaterService {
    constructor() {
        this.now = new Date();
        this.months = [
            "January",
            "February",
            "March",
            "April",
            "May",
            "June",
            "July",
            "August",
            "September",
            "October",
            "November",
            "December"
        ];
        this.weekDays = [
            "Sunday",
            "Monday",
            "Tuesday",
            "Wednesday",
            "Thursday",
            "Friday",
            "Saturday"
        ];
    }
    assign(dateString) {
        return new Date(dateString);
    }
    dater(dd = false) {
        return !dd ? new Date() : new Date(dd);
    }
    getMonth(date = this.dater()) {
        return date.getMonth();
    }
    getDate(date = this.dater()) {
        return date.getDate();
    }
    getYear(date = this.dater()) {
        return date.getFullYear();
    }
    getDay(date = this.dater()) {
        return date.getDay();
    }
    getWeekDay(date = this.dater()) {
        return this.weekDays[date.getDay()];
    }
    getHour(date = this.dater()) {
        return date.getHours();
    }
    getMinute(date = this.dater()) {
        return date.getMinutes();
    }
    getSeconds(date = this.dater()) {
        return date.getSeconds();
    }
    format(date, formatString) {
        let splitter = this.splitDate(date);
        if (splitter && splitter.date !== undefined && splitter.day !== undefined
            && splitter.hour !== undefined && splitter.minute !== undefined
            && splitter.month !== undefined && splitter.second !== undefined && splitter.year !== undefined) {
            formatString = formatString.split("dd").join(this.addZero(splitter.date, 1));
            formatString = formatString.split("d").join(`${splitter.date}`);
            formatString = formatString.split("MMMM").join(this.months[splitter.month] ? this.months[splitter.month] : "");
            formatString = formatString.split("MMM").join(this.firstDigits(this.months[splitter.month] ? this.months[splitter.month] : ""));
            formatString = formatString.split("MM").join(this.addZero(splitter.month + 1, 1));
            formatString = formatString.split("M").join(`${splitter.month + 1}`);
            formatString = formatString.split("YYYY").join(`${splitter.year}`);
            formatString = formatString.split("YY").join(this.firstDigits(`${splitter.year}`, 2));
            formatString = formatString.split("yyyy").join(`${splitter.year}`);
            formatString = formatString.split("yy").join(this.firstDigits(`${splitter.year}`, 2));
            formatString = formatString.split("DD").join(`${splitter.day}`);
            formatString = formatString.split("D").join(this.firstDigits(`${splitter.day}`, 3));
            formatString = formatString.split("HH").join(this.addZero(splitter.hour, 1));
            formatString = formatString.split("H").join(`${splitter.hour}`);
            formatString = formatString.split("hh").join(`${this.twelveHour(splitter.hour, true)}`);
            formatString = formatString.split("h").join(`${this.twelveHour(splitter.hour, false)}`);
            formatString = formatString.split("mm").join(this.addZero(splitter.minute, 1));
            formatString = formatString.split("m").join(`${splitter.minute}`);
            formatString = formatString.split("ss").join(this.addZero(splitter.second, 1));
            formatString = formatString.split("s").join(`${splitter.second}`);
            formatString = formatString.split("AP").join(this.getAp(splitter.hour));
            formatString = formatString.split("ap").join(this.getAp(splitter.hour, true));
            return formatString;
        }
        return ``;
    }
    twelveHour(dd, addZ = false) {
        let d = dd > 12 ? (dd - 12) : dd;
        return addZ ? this.addZero(d, 1) : d;
    }
    getAp(dd, sm = false) {
        let ap = {
            a: sm ? "am" : "AM",
            p: sm ? "pm" : "PM"
        };
        return dd > 12 ? ap.p : ap.a;
    }
    firstDigits(str, num = 3) {
        let mystring = str.split("");
        let final = "";
        for (let i = 0; i < num; i++) {
            final += `${mystring[i]}`;
        }
        return final;
    }
    addZero(d, numZ = 1) {
        let conc = ``;
        for (let i = 0; i < numZ; i++) {
            conc += `0`;
        }
        if (d < 10) {
            return conc + d;
        }
        return `${d}`;
    }
    initializeSplit() {
        return this.dateSplit = {
            date: 0,
            year: 0,
            month: 0,
            day: 0,
            hour: 0,
            minute: 0,
            second: 0
        };
    }
    splitDate(date) {
        this.dateSplit = this.initializeSplit();
        this.dateSplit.date = date.getDate();
        this.dateSplit.year = date.getFullYear();
        this.dateSplit.month = date.getMonth();
        this.dateSplit.day = date.getDay();
        this.dateSplit.hour = date.getHours();
        this.dateSplit.minute = date.getMinutes();
        this.dateSplit.second = date.getSeconds();
        return this.dateSplit;
    }
    getMonths(month = false) {
        if (month == false) {
            let mo = this.months.map(m => {
                return m.slice(0, 3);
            });
            return mo;
        }
        else {
            return this.months[month].slice(0, 3);
        }
    }
    getMonthsLong(month = false) {
        return month ? this.months[month] : this.months;
    }
    daysInMonth(month, year = this.getYear(this.dater())) {
        let dd = this.splitDate(this.dater(`${this.months[month - 1]} 01, ${year}`));
        return new Date(dd.year, dd.month + 1, 0).getDate();
    }
    isGreater(date1, date2) {
        let d1 = new Date(date1);
        let d2 = new Date(date2);
        return d1.getTime() > d2.getTime();
    }
    isLessThan(date1, date2) {
        let d1 = new Date(date1);
        let d2 = new Date(date2);
        return d1.getTime() < d2.getTime();
    }
}
DaterService.ɵfac = function DaterService_Factory(t) { return new (t || DaterService)(); };
DaterService.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: DaterService, factory: DaterService.ɵfac, providedIn: 'root' });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(DaterService, [{
        type: Injectable,
        args: [{
                providedIn: 'root'
            }]
    }], function () { return []; }, null); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZXIuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL21hdGVyaWFsZ3JhbW1pL3NyYy9saWIvZGF0ZXIuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDOztBQWdCM0MsTUFBTSxPQUFPLFlBQVk7SUE4QnZCO1FBN0JBLFFBQUcsR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDO1FBRWpCLFdBQU0sR0FBRztZQUNQLFNBQVM7WUFDVCxVQUFVO1lBQ1YsT0FBTztZQUNQLE9BQU87WUFDUCxLQUFLO1lBQ0wsTUFBTTtZQUNOLE1BQU07WUFDTixRQUFRO1lBQ1IsV0FBVztZQUNYLFNBQVM7WUFDVCxVQUFVO1lBQ1YsVUFBVTtTQUNYLENBQUM7UUFFRixhQUFRLEdBQUc7WUFDVCxRQUFRO1lBQ1IsUUFBUTtZQUNSLFNBQVM7WUFDVCxXQUFXO1lBQ1gsVUFBVTtZQUNWLFFBQVE7WUFDUixVQUFVO1NBQ1gsQ0FBQztJQUljLENBQUM7SUFFakIsTUFBTSxDQUFDLFVBQWtCO1FBQ3ZCLE9BQU8sSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDOUIsQ0FBQztJQUVELEtBQUssQ0FBQyxLQUFxQixLQUFLO1FBQzlCLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ3pDLENBQUM7SUFFRCxRQUFRLENBQUMsT0FBYSxJQUFJLENBQUMsS0FBSyxFQUFFO1FBQ2hDLE9BQU8sSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO0lBQ3pCLENBQUM7SUFFRCxPQUFPLENBQUMsT0FBYSxJQUFJLENBQUMsS0FBSyxFQUFFO1FBQy9CLE9BQU8sSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQ3hCLENBQUM7SUFFRCxPQUFPLENBQUMsT0FBYSxJQUFJLENBQUMsS0FBSyxFQUFFO1FBQy9CLE9BQU8sSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQzVCLENBQUM7SUFFRCxNQUFNLENBQUMsT0FBYSxJQUFJLENBQUMsS0FBSyxFQUFFO1FBQzlCLE9BQU8sSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQ3ZCLENBQUM7SUFFRCxVQUFVLENBQUMsT0FBYSxJQUFJLENBQUMsS0FBSyxFQUFFO1FBQ2xDLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztJQUN0QyxDQUFDO0lBRUQsT0FBTyxDQUFDLE9BQWEsSUFBSSxDQUFDLEtBQUssRUFBRTtRQUMvQixPQUFPLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztJQUN6QixDQUFDO0lBRUQsU0FBUyxDQUFDLE9BQWEsSUFBSSxDQUFDLEtBQUssRUFBRTtRQUNqQyxPQUFPLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztJQUMzQixDQUFDO0lBRUQsVUFBVSxDQUFDLE9BQWEsSUFBSSxDQUFDLEtBQUssRUFBRTtRQUNsQyxPQUFPLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztJQUMzQixDQUFDO0lBRUQsTUFBTSxDQUFDLElBQVUsRUFBRSxZQUFvQjtRQUNyQyxJQUFJLFFBQVEsR0FBZ0IsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNqRCxJQUFHLFFBQVEsSUFBSSxRQUFRLENBQUMsSUFBSSxLQUFLLFNBQVMsSUFBSSxRQUFRLENBQUMsR0FBRyxLQUFLLFNBQVM7ZUFDbkUsUUFBUSxDQUFDLElBQUksS0FBSyxTQUFTLElBQUksUUFBUSxDQUFDLE1BQU0sS0FBSyxTQUFTO2VBQzVELFFBQVEsQ0FBQyxLQUFLLEtBQUssU0FBUyxJQUFJLFFBQVEsQ0FBQyxNQUFNLEtBQUssU0FBUyxJQUFJLFFBQVEsQ0FBQyxJQUFJLEtBQUssU0FBUyxFQUFDO1lBQzlGLFlBQVksR0FBRyxZQUFZLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM3RSxZQUFZLEdBQUcsWUFBWSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztZQUNoRSxZQUFZLEdBQUcsWUFBWSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUMvRyxZQUFZLEdBQUcsWUFBWSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDaEksWUFBWSxHQUFHLFlBQVksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEtBQUssR0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNoRixZQUFZLEdBQUcsWUFBWSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxRQUFRLENBQUMsS0FBSyxHQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDbkUsWUFBWSxHQUFHLFlBQVksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7WUFDbkUsWUFBWSxHQUFHLFlBQVksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxRQUFRLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN0RixZQUFZLEdBQUcsWUFBWSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztZQUNuRSxZQUFZLEdBQUcsWUFBWSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3RGLFlBQVksR0FBRyxZQUFZLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLFFBQVEsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO1lBQ2hFLFlBQVksR0FBRyxZQUFZLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsUUFBUSxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDcEYsWUFBWSxHQUFHLFlBQVksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzdFLFlBQVksR0FBRyxZQUFZLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO1lBQ2hFLFlBQVksR0FBRyxZQUFZLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxD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QUMsQ0FBQztRQUN6QixJQUFJLEVBQUUsR0FBRyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUN6QixPQUFPLEVBQUUsQ0FBQyxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDckMsQ0FBQztJQUVELFVBQVUsQ0FBQyxLQUFhLEVBQUUsS0FBYTtRQUNyQyxJQUFJLEVBQUUsR0FBRyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUN6QixJQUFJLEVBQUUsR0FBRyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUN6QixPQUFPLEVBQUUsQ0FBQyxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDckMsQ0FBQzs7d0VBaE1VLFlBQVk7a0VBQVosWUFBWSxXQUFaLFlBQVksbUJBRlgsTUFBTTt1RkFFUCxZQUFZO2NBSHhCLFVBQVU7ZUFBQztnQkFDVixVQUFVLEVBQUUsTUFBTTthQUNuQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuZXhwb3J0IGludGVyZmFjZSBTcGxpdHRlZERhdGUge1xuICBkYXRlOiBudW1iZXIsXG4gIHllYXI6IG51bWJlcixcbiAgbW9udGg6IG51bWJlcixcbiAgZGF5OiBudW1iZXIsXG4gIGhvdXI6IG51bWJlcixcbiAgbWludXRlOiBudW1iZXIsXG4gIHNlY29uZDogbnVtYmVyXG59XG5cblxuQEluamVjdGFibGUoe1xuICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5leHBvcnQgY2xhc3MgRGF0ZXJTZXJ2aWNlIHtcbiAgbm93ID0gbmV3IERhdGUoKTtcblxuICBtb250aHMgPSBbXG4gICAgXCJKYW51YXJ5XCIsXG4gICAgXCJGZWJydWFyeVwiLFxuICAgIFwiTWFyY2hcIixcbiAgICBcIkFwcmlsXCIsXG4gICAgXCJNYXlcIixcbiAgICBcIkp1bmVcIixcbiAgICBcIkp1bHlcIixcbiAgICBcIkF1Z3VzdFwiLFxuICAgIFwiU2VwdGVtYmVyXCIsXG4gICAgXCJPY3RvYmVyXCIsXG4gICAgXCJOb3ZlbWJlclwiLFxuICAgIFwiRGVjZW1iZXJcIlxuICBdO1xuXG4gIHdlZWtEYXlzID0gW1xuICAgIFwiU3VuZGF5XCIsXG4gICAgXCJNb25kYXlcIixcbiAgICBcIlR1ZXNkYXlcIixcbiAgICBcIldlZG5lc2RheVwiLFxuICAgIFwiVGh1cnNkYXlcIixcbiAgICBcIkZyaWRheVwiLFxuICAgIFwiU2F0dXJkYXlcIlxuICBdO1xuXG4gIGRhdGVTcGxpdD86IFNwbGl0dGVkRGF0ZTtcblxuICBjb25zdHJ1Y3RvcigpIHsgfVxuXG4gIGFzc2lnbihkYXRlU3RyaW5nOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoZGF0ZVN0cmluZyk7XG4gIH1cblxuICBkYXRlcihkZDogc3RyaW5nIHwgZmFsc2UgPSBmYWxzZSl7XG4gICAgcmV0dXJuICFkZCA/IG5ldyBEYXRlKCkgOiBuZXcgRGF0ZShkZCk7XG4gIH1cblxuICBnZXRNb250aChkYXRlOiBEYXRlID0gdGhpcy5kYXRlcigpKXtcbiAgICByZXR1cm4gZGF0ZS5nZXRNb250aCgpO1xuICB9XG5cbiAgZ2V0RGF0ZShkYXRlOiBEYXRlID0gdGhpcy5kYXRlcigpKXtcbiAgICByZXR1cm4gZGF0ZS5nZXREYXRlKCk7XG4gIH1cblxuICBnZXRZZWFyKGRhdGU6IERhdGUgPSB0aGlzLmRhdGVyKCkpe1xuICAgIHJldHVybiBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gIH1cblxuICBnZXREYXkoZGF0ZTogRGF0ZSA9IHRoaXMuZGF0ZXIoKSl7XG4gICAgcmV0dXJuIGRhdGUuZ2V0RGF5KCk7XG4gIH1cblxuICBnZXRXZWVrRGF5KGRhdGU6IERhdGUgPSB0aGlzLmRhdGVyKCkpe1xuICAgIHJldHVybiB0aGlzLndlZWtEYXlzW2RhdGUuZ2V0RGF5KCldO1xuICB9XG5cbiAgZ2V0SG91cihkYXRlOiBEYXRlID0gdGhpcy5kYXRlcigpKXtcbiAgICByZXR1cm4gZGF0ZS5nZXRIb3VycygpO1xuICB9XG5cbiAgZ2V0TWludXRlKGRhdGU6IERhdGUgPSB0aGlzLmRhdGVyKCkpe1xuICAgIHJldHVybiBkYXRlLmdldE1pbnV0ZXMoKTtcbiAgfVxuXG4gIGdldFNlY29uZHMoZGF0ZTogRGF0ZSA9IHRoaXMuZGF0ZXIoKSl7XG4gICAgcmV0dXJuIGRhdGUuZ2V0U2Vjb25kcygpO1xuICB9XG5cbiAgZm9ybWF0KGRhdGU6IERhdGUsIGZvcm1hdFN0cmluZzogc3RyaW5nKSB7XG4gICAgbGV0IHNwbGl0dGVyOlNwbGl0dGVkRGF0ZSA9IHRoaXMuc3BsaXREYXRlKGRhdGUpO1xuICAgIGlmKHNwbGl0dGVyICYmIHNwbGl0dGVyLmRhdGUgIT09IHVuZGVmaW5lZCAmJiBzcGxpdHRlci5kYXkgIT09IHVuZGVmaW5lZCBcbiAgICAgICYmIHNwbGl0dGVyLmhvdXIgIT09IHVuZGVmaW5lZCAmJiBzcGxpdHRlci5taW51dGUgIT09IHVuZGVmaW5lZCBcbiAgICAgICYmIHNwbGl0dGVyLm1vbnRoICE9PSB1bmRlZmluZWQgJiYgc3BsaXR0ZXIuc2Vjb25kICE9PSB1bmRlZmluZWQgJiYgc3BsaXR0ZXIueWVhciAhPT0gdW5kZWZpbmVkKXtcbiAgICAgICAgZm9ybWF0U3RyaW5nID0gZm9ybWF0U3RyaW5nLnNwbGl0KFwiZGRcIikuam9pbih0aGlzLmFkZFplcm8oc3BsaXR0ZXIuZGF0ZSwgMSkpO1xuICAgICAgICBmb3JtYXRTdHJpbmcgPSBmb3JtYXRTdHJpbmcuc3BsaXQoXCJkXCIpLmpvaW4oYCR7c3BsaXR0ZXIuZGF0ZX1gKTtcbiAgICAgICAgZm9ybWF0U3RyaW5nID0gZm9ybWF0U3RyaW5nLnNwbGl0KFwiTU1NTVwiKS5qb2luKHRoaXMubW9udGhzW3NwbGl0dGVyLm1vbnRoXSA/IHRoaXMubW9udGhzW3NwbGl0dGVyLm1vbnRoXSA6IFwiXCIpO1xuICAgICAgICBmb3JtYXRTdHJpbmcgPSBmb3JtYXRTdHJpbmcuc3BsaXQoXCJNTU1cIikuam9pbih0aGlzLmZpcnN0RGlnaXRzKHRoaXMubW9udGhzW3NwbGl0dGVyLm1vbnRoXSA/IHRoaXMubW9udGhzW3NwbGl0dGVyLm1vbnRoXSA6IFwiXCIpKTtcbiAgICAgICAgZm9ybWF0U3RyaW5nID0gZm9ybWF0U3RyaW5nLnNwbGl0KFwiTU1cIikuam9pbih0aGlzLmFkZFplcm8oc3BsaXR0ZXIubW9udGgrMSwgMSkpO1xuICAgICAgICBmb3JtYXRTdHJpbmcgPSBmb3JtYXRTdHJpbmcuc3BsaXQoXCJNXCIpLmpvaW4oYCR7c3BsaXR0ZXIubW9udGgrMX1gKTtcbiAgICAgICAgZm9ybWF0U3RyaW5nID0gZm9ybWF0U3RyaW5nLnNwbGl0KFwiWVlZWVwiKS5qb2luKGAke3NwbGl0dGVyLnllYXJ9YCk7XG4gICAgICAgIGZvcm1hdFN0cmluZyA9IGZvcm1hdFN0cmluZy5zcGxpdChcIllZXCIpLmpvaW4odGhpcy5maXJzdERpZ2l0cyhgJHtzcGxpdHRlci55ZWFyfWAsIDIpKTtcbiAgICAgICAgZm9ybWF0U3RyaW5nID0gZm9ybWF0U3RyaW5nLnNwbGl0KFwieXl5eVwiKS5qb2luKGAke3NwbGl0dGVyLnllYXJ9YCk7XG4gICAgICAgIGZvcm1hdFN0cmluZyA9IGZvcm1hdFN0cmluZy5zcGxpdChcInl5XCIpLmpvaW4odGhpcy5maXJzdERpZ2l0cyhgJHtzcGxpdHRlci55ZWFyfWAsIDIpKTtcbiAgICAgICAgZm9ybWF0U3RyaW5nID0gZm9ybWF0U3RyaW5nLnNwbGl0KFwiRERcIikuam9pbihgJHtzcGxpdHRlci5kYXl9YCk7XG4gICAgICAgIGZvcm1hdFN0cmluZyA9IGZvcm1hdFN0cmluZy5zcGxpdChcIkRcIikuam9pbih0aGlzLmZpcnN0RGlnaXRzKGAke3NwbGl0dGVyLmRheX1gLCAzKSk7XG4gICAgICAgIGZvcm1hdFN0cmluZyA9IGZvcm1hdFN0cmluZy5zcGxpdChcIkhIXCIpLmpvaW4odGhpcy5hZGRaZXJvKHNwbGl0dGVyLmhvdXIsIDEpKTtcbiAgICAgICAgZm9ybWF0U3RyaW5nID0gZm9ybWF0U3RyaW5nLnNwbGl0KFwiSFwiKS5qb2luKGAke3NwbGl0dGVyLmhvdXJ9YCk7XG4gICAgICAgIGZvcm1hdFN0cmluZyA9IGZvcm1hdFN0cmluZy5zcGxpdChcImhoXCIpLmpvaW4oYCR7dGhpcy50d2VsdmVIb3VyKHNwbGl0dGVyLmhvdXIsIHRydWUpfWApO1xuICAgICAgICBmb3JtYXRTdHJpbmcgPSBmb3JtYXRTdHJpbmcuc3BsaXQoXCJoXCIpLmpvaW4oYCR7dGhpcy50d2VsdmVIb3VyKHNwbGl0dGVyLmhvdXIsIGZhbHNlKX1gKTtcbiAgICAgICAgZm9ybWF0U3RyaW5nID0gZm9ybWF0U3RyaW5nLnNwbGl0KFwibW1cIikuam9pbih0aGlzLmFkZFplcm8oc3BsaXR0ZXIubWludXRlLCAxKSk7XG4gICAgICAgIGZvcm1hdFN0cmluZyA9IGZvcm1hdFN0cmluZy5zcGxpdChcIm1cIikuam9pbihgJHtzcGxpdHRlci5taW51dGV9YCk7XG4gICAgICAgIGZvcm1hdFN0cmluZyA9IGZvcm1hdFN0cmluZy5zcGxpdChcInNzXCIpLmpvaW4odGhpcy5hZGRaZXJvKHNwbGl0dGVyLnNlY29uZCwgMSkpO1xuICAgICAgICBmb3JtYXRTdHJpbmcgPSBmb3JtYXRTdHJpbmcuc3BsaXQoXCJzXCIpLmpvaW4oYCR7c3BsaXR0ZXIuc2Vjb25kfWApO1xuICAgICAgICBmb3JtYXRTdHJpbmcgPSBmb3JtYXRTdHJpbmcuc3BsaXQoXCJBUFwiKS5qb2luKHRoaXMuZ2V0QXAoc3BsaXR0ZXIuaG91cikpO1xuICAgICAgICBmb3JtYXRTdHJpbmcgPSBmb3JtYXRTdHJpbmcuc3BsaXQoXCJhcFwiKS5qb2luKHRoaXMuZ2V0QXAoc3BsaXR0ZXIuaG91ciwgdHJ1ZSkpO1xuICAgICAgICByZXR1cm4gZm9ybWF0U3RyaW5nO1xuICAgICAgfVxuICAgIHJldHVybiBgYDtcbiAgfVxuXG4gIHR3ZWx2ZUhvdXIoZGQ6IG51bWJlciwgYWRkWiA9IGZhbHNlKSB7XG4gICAgbGV0IGQ6IG51bWJlciA9IGRkID4gMTIgPyAoZGQgLSAxMikgOiBkZDtcbiAgICByZXR1cm4gYWRkWiA/IHRoaXMuYWRkWmVybyhkLCAxKSA6IGQ7XG4gIH1cblxuICBnZXRBcChkZDogbnVtYmVyLCBzbSA9IGZhbHNlKSB7XG4gICAgbGV0IGFwID0ge1xuICAgICAgYTogc20gPyBcImFtXCIgOiBcIkFNXCIsXG4gICAgICBwOiBzbSA/IFwicG1cIiA6IFwiUE1cIlxuICAgIH07XG4gICAgcmV0dXJuIGRkID4gMTIgPyBhcC5wIDogYXAuYTtcbiAgfVxuXG4gIHByaXZhdGUgZmlyc3REaWdpdHMoc3RyOiBzdHJpbmcsIG51bSA9IDMpIHtcbiAgICBsZXQgbXlzdHJpbmcgPSBzdHIuc3BsaXQoXCJcIik7XG4gICAgbGV0IGZpbmFsID0gXCJcIjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bTsgaSsrKSB7XG4gICAgICBmaW5hbCArPSBgJHtteXN0cmluZ1tpXX1gO1xuICAgIH1cbiAgICByZXR1cm4gZmluYWw7XG4gIH1cblxuICBwcml2YXRlIGFkZFplcm8oZDogbnVtYmVyLCBudW1aID0gMSkge1xuICAgIGxldCBjb25jID0gYGA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1aOyBpKyspIHtcbiAgICAgIGNvbmMgKz0gYDBgO1xuICAgIH1cbiAgICBpZiAoZCA8IDEwKSB7XG4gICAgICByZXR1cm4gY29uYyArIGQ7XG4gICAgfVxuICAgIHJldHVybiBgJHtkfWA7XG4gIH1cblxuICBpbml0aWFsaXplU3BsaXQgKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGVTcGxpdCA9IHtcbiAgICAgIGRhdGU6IDAsXG4gICAgICB5ZWFyOiAwLFxuICAgICAgbW9udGg6IDAsIFxuICAgICAgZGF5OiAwLFxuICAgICAgaG91cjogMCxcbiAgICAgIG1pbnV0ZTogMCxcbiAgICAgIHNlY29uZDogMFxuICAgIH07XG4gIH1cblxuICBzcGxpdERhdGUoZGF0ZTogRGF0ZSkge1xuICAgIHRoaXMuZGF0ZVNwbGl0ID0gdGhpcy5pbml0aWFsaXplU3BsaXQoKTtcbiAgICB0aGlzLmRhdGVTcGxpdC5kYXRlID0gZGF0ZS5nZXREYXRlKCk7XG4gICAgdGhpcy5kYXRlU3BsaXQueWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICB0aGlzLmRhdGVTcGxpdC5tb250aCA9IGRhdGUuZ2V0TW9udGgoKTtcbiAgICB0aGlzLmRhdGVTcGxpdC5kYXkgPSBkYXRlLmdldERheSgpO1xuICAgIHRoaXMuZGF0ZVNwbGl0LmhvdXIgPSBkYXRlLmdldEhvdXJzKCk7XG4gICAgdGhpcy5kYXRlU3BsaXQubWludXRlID0gZGF0ZS5nZXRNaW51dGVzKCk7XG4gICAgdGhpcy5kYXRlU3BsaXQuc2Vjb25kID0gZGF0ZS5nZXRTZWNvbmRzKCk7XG4gICAgcmV0dXJuIHRoaXMuZGF0ZVNwbGl0O1xuICB9XG5cbiAgZ2V0TW9udGhzKG1vbnRoOiBudW1iZXIgfCBmYWxzZSA9IGZhbHNlKSB7XG4gICAgaWYobW9udGggPT0gZmFsc2UpIHtcbiAgICAgIGxldCBtbyA9IHRoaXMubW9udGhzLm1hcChtID0+IHtcbiAgICAgICAgcmV0dXJuIG0uc2xpY2UoMCwgMyk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBtbztcbiAgICB9ZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5tb250aHNbbW9udGhdLnNsaWNlKDAsIDMpO1xuICAgIH1cbiAgICBcbiAgfVxuXG4gIGdldE1vbnRoc0xvbmcobW9udGg6IG51bWJlciB8IGZhbHNlID0gZmFsc2UpIHsgXG4gICAgcmV0dXJuIG1vbnRoID8gdGhpcy5tb250aHNbbW9udGhdIDogdGhpcy5tb250aHM7XG4gIH1cblxuICBkYXlzSW5Nb250aChtb250aDogbnVtYmVyLCB5ZWFyOm51bWJlciA9IHRoaXMuZ2V0WWVhcih0aGlzLmRhdGVyKCkpKSB7XG4gICAgbGV0IGRkID0gdGhpcy5zcGxpdERhdGUodGhpcy5kYXRlcihgJHt0aGlzLm1vbnRoc1ttb250aC0xXX0gMDEsICR7eWVhcn1gKSk7XG4gICAgcmV0dXJuIG5ldyBEYXRlKGRkLnllYXIsIGRkLm1vbnRoICsgMSwgMCkuZ2V0RGF0ZSgpO1xuICB9XG5cbiAgaXNHcmVhdGVyKGRhdGUxOiBzdHJpbmcsIGRhdGUyOiBzdHJpbmcpe1xuICAgIGxldCBkMSA9IG5ldyBEYXRlKGRhdGUxKTtcbiAgICBsZXQgZDIgPSBuZXcgRGF0ZShkYXRlMik7XG4gICAgcmV0dXJuIGQxLmdldFRpbWUoKSA+IGQyLmdldFRpbWUoKTsgXG4gIH1cblxuICBpc0xlc3NUaGFuKGRhdGUxOiBzdHJpbmcsIGRhdGUyOiBzdHJpbmcpe1xuICAgIGxldCBkMSA9IG5ldyBEYXRlKGRhdGUxKTtcbiAgICBsZXQgZDIgPSBuZXcgRGF0ZShkYXRlMik7XG4gICAgcmV0dXJuIGQxLmdldFRpbWUoKSA8IGQyLmdldFRpbWUoKTsgXG4gIH1cbn1cbiJdfQ==